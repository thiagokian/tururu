<!doctype html>
<html lang="pt-br">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/funcoes.css">
    <title>HelpMath</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-expand-md navbar-light">
        <a class="navbar-brand" href="#"> <p class="cor-fontes">HelpMath</p> </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item ">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="sobre.html">Sobre</a>
            </li>
            <li class="nav-item dropdown active">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Aula<span class="sr-only">(current)</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="funcoes.html">Funções</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="blog.html">Blog</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contato.html">Contate-nos</a>
            </li>
          </ul>
          <div class="form-inline my-2 my-lg-0">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" data-toggle="modal" data-target="#exampleModal">Entrar/Registrar</button>
          </div>
        </div>
      </nav>
    </div>
    <!-- modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModal" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Entre na sua conta</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="alert alert-danger" role="alert">Atenção! Login/Registro em desenvolvimento!</div>
              <div class="form-group">
                <label for="recipient-name" class="col-form-label">Email:</label>
                <input type="email" class="form-control" id="recipient-name">
              </div>
              <div class="form-group">
                <label for="message-text" class="col-form-label">Senha:</label>
                <input type="password" class="form-control" id="recipient-name">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <a href="#"><button type="button" class="btn btn-primary">Entrar</button></a>
            <a href="#"><button type="button" class="btn btn-second">Registrar</button></a>
          </div>
        </div>
      </div>
    </div>
        <div class="img1-2 alturaImg" alt="Imagem">
            <div class="text3 Sketch_Block-font" id="text">Para fazer uma pergunta, diga HELP e siga as orientações!</div>
            <div class="text4 Sketch_Block-font" id="text2"></div>
          </div>
    </div>

    </div>




    </div>
    <div class="container conteudo-funcoes">
      <embed src="./pdf/funcoes.pdf"width="100%" height="100%" alt="pdf" pluginspage="http://www.adobe.com/products/acrobat/readstep2.html">
    </div>

    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">MathBot diz... </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            blablablablabla
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Não esclareceu minha dúvida!</button>
            <button type="button" class="btn btn-primary">Ótimo, entendi!</button>
          </div>
        </div>
      </div>
    </div>



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script>
    if (!('webkitSpeechRecognition' in window)) {
        $('#text').text('Web speech API not present');
    } else {
        g_timer = null;
        var recognition = new webkitSpeechRecognition();
        final_transcript = '';
        var StartAsk = false;
        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.lang = 'pt-BR';
        recognition.start();
        recognition.onstart = function(event) {
        }
        recognition.onend = function(event) {}
        recognition.onresult = function(event) {
            var interim_transcript = '';
            for (var i = event.resultIndex; i < event.results.length; ++i) {
                if (event.results[i].isFinal) {
                    final_transcript += event.results[i][0].transcript;

                } else {
                    interim_transcript += event.results[i][0].transcript;
                }
                if (final_transcript.includes("help") || interim_transcript.includes("help")) {
                    interim_transcript = '';
                    final_transcript = '';
                    StartAsk = true;
                    $('#text').html('Diga sua pergunta! Quando terminar, aguarde em silêncio!');
                    if (g_timer == null) {
                        startTimer();
                    }
                }
                if (g_timer != null) {
                    clearTimeout(g_timer);
                    startTimer();
                }
                if (StartAsk) {
                  $('#text2').html(final_transcript+ ' ' + '<span style="color: #aaa">' + interim_transcript + '</span>');
                }
            }
        }

        function startTimer() {
            g_timer = window.setTimeout(function() {
                StartAsk = false;
                $('#text').html('Pergunta capturada! Aguarde, estamos formulando sua resposta!');
                setTimeout(function() {
                    $('#exampleModalCenter').modal('show');
                    final_transcript = '';
                    $('#text2').html('');
                    $('#text').html('Para fazer uma pergunta, diga HELP e siga as orientações!');
                }, 4000);
            }, 2000);
        }
    };
    </script>
  </body>
</html>
